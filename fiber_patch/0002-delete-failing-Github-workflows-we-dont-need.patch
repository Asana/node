From 92bb1855405e499fa01b13b172cd10d076380ac9 Mon Sep 17 00:00:00 2001
From: Sean Wentzel <sean@asana.com>
Date: Fri, 5 Jan 2024 12:07:37 -0800
Subject: [PATCH 2/6] delete failing Github workflows we dont need

---
 .github/label-pr-config.yml                   | 202 ------------------
 .../commit-lint-problem-matcher.json          |  13 --
 .github/workflows/commit-lint.yml             |  32 ---
 .github/workflows/label-pr.yml                |  18 --
 4 files changed, 265 deletions(-)
 delete mode 100644 .github/label-pr-config.yml
 delete mode 100644 .github/workflows/commit-lint-problem-matcher.json
 delete mode 100644 .github/workflows/commit-lint.yml
 delete mode 100644 .github/workflows/label-pr.yml

diff --git a/.github/label-pr-config.yml b/.github/label-pr-config.yml
deleted file mode 100644
index 1c281d13e0..0000000000
--- a/.github/label-pr-config.yml
+++ /dev/null
@@ -1,202 +0,0 @@
-## Order of entries in this map *does* matter for the resolved labels
-## earlier entries override later entries
-subSystemLabels:
-  # src subsystems
-  /^src\/async_wrap/: c++, async_wrap
-  /^src\/(?:base64|node_buffer|string_)/: c++, buffer
-  /^src\/cares/: c++, cares
-  /^src\/(?:process_wrap|spawn_)/: c++, child_process
-  /^src\/(?:node_)?crypto/: c++, crypto
-  /^src\/debug_/: c++, debugger
-  /^src\/udp_/: c++, dgram
-  /^src\/(?:fs_|node_file|node_stat_watcher)/: c++, fs
-  /^src\/node_http_parser/: c++, http_parser
-  /^src\/node_i18n/: c++, i18n-api
-  /^src\/uv\./: c++, libuv
-  /^src\/(?:connect(?:ion)?|pipe|tcp)_/: c++, net
-  /^src\/node_os/: c++, os
-  /^src\/(?:node_main|signal_)/: c++, process
-  /^src\/timer[_s]/: c++, timers
-  /^src\/node_root_certs/: c++, tls
-  /^src\/tty_/: c++, tty
-  /^src\/node_url/: c++, whatwg-url
-  /^src\/node_util/: c++, util
-  /^src\/(?:node_v8|v8abbr)/: c++, v8 engine
-  /^src\/node_contextify/: c++, vm
-  /^src\/node_zlib/: c++, zlib
-  /^src\/tracing/: c++, tracing
-  /^src\/(?:node_api|js_native_api)/: c++, node-api
-  /^src\/node_http2/: c++, http2
-  /^src\/node_report/: c++, report
-  /^src\/node_wasi/: c++, wasi
-  /^src\/node_worker/: c++, worker
-  /^src\/quic\/*/: c++, quic
-  /^src\/node_bob*/: c++, quic
-  /^src\/node_sea/: single-executable
-
-  # Properly label changes to V8 inspector integration-related files
-  /^src\/inspector_/: c++, inspector, needs-ci
-
-  # Don't want to label it a C++ update when we're "only" bumping the Node.js version
-  /^src\/(?!node_version\.h)/: c++
-  # BUILDING.md should be marked as 'build' in addition to 'doc'
-  /^BUILDING\.md$/: build, doc
-  # 'meta' is a very specific label for things that are policy and or meta-info related
-  /^(?:[A-Z]+$|CODE_OF_CONDUCT|GOVERNANCE|CHANGELOG|\.mail|\.git.+)/: meta
-  # Things that edit top-level .md files are always a doc change
-  /^\w+\.md$/: doc
-  # Different variants of Makefile and build files
-  /^(?:tools\/)?(?:Makefile|BSDmakefile|create_android_makefiles)$/: build, needs-ci
-  /^tools\/(?:install\.py|genv8constants\.py|getnodeversion\.py|js2c\.py|utils\.py|configure\.d\/.*)$/: build, python, needs-ci
-  /^vcbuild\.bat$/: build, windows, needs-ci
-  /^(?:android-)?configure|node\.gyp|common\.gypi$/: build, needs-ci
-  # More specific tools
-  /^tools\/gyp/: tools, build, gyp, needs-ci
-  /^tools\/doc\//: tools, doc
-  /^tools\/icu\//: tools, i18n-api, icu, needs-ci
-  /^tools\/osx-/: tools, macos
-  /^tools\/test-npm/: tools, test, npm
-  /^tools\/test/: tools, test
-  /^tools\/(?:certdata|mkssldef|mk-ca-bundle)/: tools, openssl, tls
-  /^tools\/msvs\//: tools, windows, install, needs-ci
-  /^tools\/[^/]+\.bat$/: tools, windows, needs-ci
-  /^tools\/make-v8/: tools, v8 engine, needs-ci
-  /^tools\/v8_gypfiles/: tools, v8 engine, needs-ci
-  /^tools\/snapshot/: needs-ci
-  /^tools\/build-addons.mjs/: needs-ci
-  # All other tool changes should be marked as such
-  /^tools\//: tools
-  /^\.eslint|\.editorconfig/: tools
-  /^typings\//: typings
-
-  ## Dependencies
-  # libuv needs an explicit mapping, as the ordinary /deps/ mapping below would
-  # end up as libuv changes labeled with 'uv' (which is a non-existing label)
-  /^deps\/uv\//: libuv
-  /^deps\/v8\/tools\/gen-postmortem-metadata\.py/: v8 engine, python, post-mortem
-  /^deps\/v8\//: v8 engine
-  /^deps\/uvwasi\//: wasi
-  /^deps\/npm\//: npm, fast-track
-  /^deps\/nghttp2\/nghttp2\.gyp/: build, http2
-  /^deps\/nghttp2\//: http2
-  /^deps\/ngtcp2\//: quic
-  /^deps\/([^/]+)/: dependencies, $1
-
-  ## JS subsystems
-  # Oddities first
-  /^lib\/(?:punycode|\w+\/freelist|sys\.js)/: ''
-  /^lib\/constants\.js$/: lib / src
-  /^lib\/internal/debugger$/: debugger
-  /^lib\/internal\/linkedlist\.js$/: timers
-  /^lib\/internal\/bootstrap/: lib / src
-  /^lib\/internal\/v8_prof_/: tools
-  /^lib\/internal\/socket(?:_list|address)\.js$/: net
-  /^lib\/\w+\/streams$/: stream
-  /^lib\/.*http2/: http2
-  /^lib\/worker_threads.js$/: worker
-  /^lib\/test.js$/: test_runner
-  /^lib\/internal\/url\.js$/: whatwg-url
-  /^lib\/internal\/modules\/esm/: esm
-  /^lib\/internal\/webstreams/: web streams
-  /^lib\/internal\/test_runner/: test_runner
-
-  # All other lib/ files map directly
-  /^lib\/_(\w+)_\w+\.js?$/: $1  # e.g. _(stream)_wrap
-  /^lib(?:\/internal)?\/(\w+)\.js?$/: $1  # Other .js files
-  /^lib(?:\/internal)?\/(\w+)(?:\/|$)/: $1  # Subfolders
-
-exlusiveLabels:
-  # More specific tests
-  /^test\/addons\//: test, addons
-  /^test\/debugger/: test, debugger
-  /^test\/doctool\//: test, doc, tools
-  /^test\/timers/: test, timers
-  /^test\/pseudo-tty\//: test, tty
-  /^test\/inspector/: test, inspector
-  /^test\/cctest\/test_inspector/: test, inspector
-  /^test\/node-api\//: test, node-api
-  /^test\/js-native-api\//: test, node-api
-  /^test\/async-hooks\//: test, async_hooks
-  /^test\/report\//: test, report
-  /^test\/fixtures\/es-module/: test, esm
-  /^test\/es-module\//: test, esm
-  /^test\/fixtures\/wpt\/streams\//: test, web streams
-
-  /^test\//: test
-
-  # Specific map for webcrypto.md as it should be labeled 'crypto'
-  /^doc\/api\/webcrypto.md$/: doc, crypto
-  # Specific map for modules.md as it should be labeled 'module' not 'modules'
-  /^doc\/api\/modules.md$/: doc, module
-  # node-api is treated separately since it is not a JS core module but is still
-  # considered a subsystem of sorts
-  /^doc\/api\/n-api.md$/: doc, node-api
-  # Add worker label to PRs that affect doc/api/worker_threads.md
-  /^doc\/api\/worker_threads.md$/: doc, worker
-  # test_runner documentation
-  /^doc\/api\/test.md$/: doc, test_runner
-  # Automatically tag JS subsystem-specific API doc changes
-  /^doc\/api\/(\w+)\.md$/: doc, $1
-  # Add deprecations label to PRs that affect doc/api/deprecations.md
-  /^doc\/api\/deprecations.md$/: doc, deprecations
-  /^doc\/changelogs\//: release
-
-  /^doc\//: doc
-
-  # More specific benchmarks
-  /^benchmark\/buffers\//: benchmark, buffer
-  /^benchmark\/es\//: benchmark, v8 engine
-  /^benchmark\/_http/: benchmark, http
-  /^benchmark\/(?:misc|fixtures)\//: benchmark
-  /^benchmark\/streams\//: benchmark, stream
-  /^benchmark\/url\//: benchmark, url, whatwg-url
-  /^benchmark\/([^/]+)\//: benchmark, $1
-
-  /^benchmark\//: benchmark, performance
-
-allJsSubSystems:
-  - assert
-  - async_hooks
-  - buffer
-  - child_process
-  - cluster
-  - console
-  - crypto
-  - debugger
-  - dgram
-  - diagnostics_channel
-  - dns
-  - domain
-  - events
-  - esm
-  - fs
-  - http
-  - https
-  - http2
-  - inspector
-  - module
-  - net
-  - os
-  - path
-  - perf_hooks
-  - process
-  - punycode
-  - querystring
-  - quic
-  - readline
-  - repl
-  - report
-  - stream
-  - string_decoder
-  - timers
-  - tls
-  - trace_events
-  - tty
-  - typings
-  - url
-  - util
-  - v8
-  - vm
-  - wasi
-  - worker
-  - zlib
diff --git a/.github/workflows/commit-lint-problem-matcher.json b/.github/workflows/commit-lint-problem-matcher.json
deleted file mode 100644
index 72dd13b9e0..0000000000
--- a/.github/workflows/commit-lint-problem-matcher.json
+++ /dev/null
@@ -1,13 +0,0 @@
-{
-  "problemMatcher": [
-    {
-      "owner": "core-validate-commit",
-      "pattern": [
-        {
-          "regexp": "^not ok \\d+ (.*)$",
-          "message": 1
-        }
-      ]
-    }
-  ]
-}
diff --git a/.github/workflows/commit-lint.yml b/.github/workflows/commit-lint.yml
deleted file mode 100644
index 444725e9fe..0000000000
--- a/.github/workflows/commit-lint.yml
+++ /dev/null
@@ -1,32 +0,0 @@
-name: First commit message adheres to guidelines
-
-on: [pull_request]
-
-env:
-  NODE_VERSION: lts/*
-
-permissions:
-  contents: read
-
-jobs:
-  lint-commit-message:
-    runs-on: ubuntu-latest
-    steps:
-      - name: Compute number of commits in the PR
-        id: nb-of-commits
-        run: |
-          echo "plusOne=$((${{ github.event.pull_request.commits }} + 1))" >> $GITHUB_OUTPUT
-          echo "minusOne=$((${{ github.event.pull_request.commits }} - 1))" >> $GITHUB_OUTPUT
-      - uses: actions/checkout@8ade135a41bc03ea155e62e844d188df1ea18608  # v4.1.0
-        with:
-          fetch-depth: ${{ steps.nb-of-commits.outputs.plusOne }}
-          persist-credentials: false
-      - run: git reset HEAD^2
-      - name: Install Node.js
-        uses: actions/setup-node@5e21ff4d9bc1a8cf6de233a3057d20ec6b3fb69d  # v3.8.1
-        with:
-          node-version: ${{ env.NODE_VERSION }}
-      - name: Validate commit message
-        run: |
-          echo "::add-matcher::.github/workflows/commit-lint-problem-matcher.json"
-          git rev-parse HEAD~${{ steps.nb-of-commits.outputs.minusOne }} | xargs npx -q core-validate-commit --no-validate-metadata --tap
diff --git a/.github/workflows/label-pr.yml b/.github/workflows/label-pr.yml
deleted file mode 100644
index 95fdd42a4c..0000000000
--- a/.github/workflows/label-pr.yml
+++ /dev/null
@@ -1,18 +0,0 @@
-name: Label PRs
-
-on:
-  pull_request_target:
-    types: [opened]
-
-permissions:
-  contents: read
-
-jobs:
-  label:
-    runs-on: ubuntu-latest
-
-    steps:
-      - uses: nodejs/node-pr-labeler@d4cf1b8b9f23189c37917000e5e17e796c770a6b  # v1
-        with:
-          repo-token: ${{ secrets.GH_USER_TOKEN }}
-          configuration-path: .github/label-pr-config.yml
-- 
2.48.0

